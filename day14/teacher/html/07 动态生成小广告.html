<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .adBox {
            width: 300px;
            height: 400px;
            background-color: #f00;
            position: fixed;
            right: 5px;
            bottom: 5px;
            /* display: none; */
        }

        .close {
            position: absolute;
            right: 0;
            top: 0;
            padding: 5px;
            background-color: #00f;
        }

        .adBox img {
            width: 80%;
            display: block;
            margin: 0 auto;
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <!-- <div class="adBox">
        <div class="title">距离广告关闭还有10秒</div>
        <div class="close">X</div>
        <img src="../images/new-coupon-img.gif" alt="">
    </div> -->
</body>
<script>


    // <div class="adBox">
    //     <div class="title">距离广告关闭还有10秒</div>
    //     <div class="close">X</div>
    //     <img src="../images/new-coupon-img.gif" alt="">
    // </div>

    var timer1 = null; // 记录延时器
    var timer2 = null; // 记录计时器

    createAd(5000);
    function createAd(delay) {
        timer1 = setTimeout(function () {
            // adBox
            var addBox = document.createElement("div");
            addBox.setAttribute("class", "adBox");
            console.log(addBox);
            // addBox.onclick = function () {
            //     location.href = "https://www.baidu.com";
            // }

            // title
            var titleBox = document.createElement("div");
            titleBox.setAttribute("class", "title")
            titleBox.innerText = "距离广告关闭还有10秒";
            addBox.appendChild(titleBox);

            // close
            var closeBox = document.createElement("div");
            closeBox.innerText = "X";
            closeBox.setAttribute("class", "close");
            addBox.appendChild(closeBox);

            // 如何阻止close  事件触发后  传递到  addBox;
            closeBox.onclick = function () {
                clearTimeout(timer1);
                clearInterval(timer2);
                addBox.remove();
                createAd(5000);
            }

            // img 
            var img = document.createElement("img");
            img.setAttribute("src", "../images/new-coupon-img.gif");
            addBox.appendChild(img);

            img.onclick = function () {
                location.href = "https://www.baidu.com";
            }

            document.body.appendChild(addBox);

            var num = 10;
            timer2 = setInterval(function () {
                num--;
                titleBox.innerHTML = `距离广告关闭还有${num}秒`;
                if (num == 0) {
                    clearInterval(timer2);
                    addBox.remove();
                    createAd(5000);
                }
            }, 1000);
        }, delay)
    }






</script>

</html>